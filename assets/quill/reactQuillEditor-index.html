<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
</head>
<body style="
margin: 0 !important;
padding: 0 !important;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
">
<!-- Include stylesheet -->
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
<!-- Create the editor container -->
<div id="editor">
</div>
<!-- Include the Quill library -->
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
<!-- Initialize Quill editor -->
<script>
    const toolbarOptions = [
        [{'header': [1, 2, 3, 4, 5, 6, false]}],
        ['bold', 'italic', 'underline', 'strike'],
        [{'list': 'ordered'}, {'list': 'bullet'}],
        [{'indent': '-1'}, {'indent': '+1'}],
        [{'align': []}],
    ];

    var quill = new Quill('#editor', {
        theme: 'snow',
        placeholder: '请输入内容',
        modules: {
            toolbar: toolbarOptions
        }
    });

    function handleMessage(event) {
        const MESSAGE_PREFIX = 'react-native-webview-quilljs';
        let msgData = JSON.parse(event.data);
        try {
            if (msgData.hasOwnProperty('prefix') && msgData.prefix === MESSAGE_PREFIX) {
                switch (msgData.type) {
                    case 'LOAD_EDITOR':

                        break;
                    case 'SEND_EDITOR':

                        break;
                    case 'GET_DELTA':
                        const html = document.querySelector('#editor').children[0].innerHTML;
                        const msg = {
                            prefix: MESSAGE_PREFIX,
                            type: 'RECEIVE_DELTA',
                            payload: html
                        };
                        window.ReactNativeWebView.postMessage(JSON.stringify(msg));
                        break;
                    case 'SET_CONTENTS':
                        document.querySelector('#editor').children[0].innerHTML = msgData.payload;
                        break;
                    case 'SET_HTML_CONTENTS':

                        break;
                    case 'MESSAGE_ACKNOWLEDGED':

                        break;
                    default:

                }
            }
        } catch (err) {
        }
    }

    window.document.addEventListener('message', handleMessage);
    window.addEventListener('message', handleMessage);

    function resize() {
        if (document.activeElement.tagName == "INPUT" ||
            document.activeElement.tagName == "TEXTAREA") {
            window.setTimeout(function () {
                document.activeElement.scrollIntoViewIfNeeded();
            }, 0);
        }
    }

    window.document.addEventListener('resize', resize);
    window.addEventListener('resize', resize);
</script>
</body>
</html>